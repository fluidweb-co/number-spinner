{"version":3,"file":"../number-spinner.min.js","sources":["number-spinner.js"],"sourcesContent":["/**\n * File number-spinner.js.\n *\n * Add plus/minus buttons to input type number.\n */\n(function (root, factory) {\n\tif ( typeof define === 'function' && define.amd ) {\n\t\tdefine([], factory(root));\n\t} else if ( typeof exports === 'object' ) {\n\t\tmodule.exports = factory(root);\n\t} else {\n\t\troot.NumberSpinner = factory(root);\n\t}\n})(typeof global !== 'undefined' ? global : this.window || this.global, function (root) {\n\n\t'use strict';\n\n\tvar _hasInitialized = false;\n\tvar _publicMethods = {}; // Placeholder for public methods\n\tvar _settings = {\n\t\tbodyClass: 'has-number-spinner',\n\n\t\tcontainerSelector: '',\n\t\tinputSelector: 'input[type=\"number\"]',\n\n\t\tbuttonPlacement: 'both', // Accepts `both`, `before` and `after`.\n\t\tbuttonsAddedClass: 'buttons-added',\n\n\t\tminusButtonTemplate: '<button type=\"button\" class=\"number-spin-button minus\" title=\"Decrease\" aria-hidden=\"true\" tabindex=\"-1\">-</button>',\n\t\tplusButtonTemplate: '<button type=\"button\" class=\"number-spin-button plus\" title=\"Increase\" aria-hidden=\"true\" tabindex=\"-1\">+</button>',\n\n\t\tonChangeCallback: null,\n\t};\n\n\n\n\t/**\n\t * METHODS\n\t */\n\n\n\t\n\t/*!\n\t* Merge two or more objects together.\n\t* (c) 2017 Chris Ferdinandi, MIT License, https://gomakethings.com\n\t* @param   {Boolean}  deep     If true, do a deep (or recursive) merge [optional]\n\t* @param   {Object}   objects  The objects to merge together\n\t* @returns {Object}            Merged values of defaults and options\n\t*/\n\tvar extend = function () {\n\t\t// Variables\n\t\tvar extended = {};\n\t\tvar deep = false;\n\t\tvar i = 0;\n\n\t\t// Check if a deep merge\n\t\tif ( Object.prototype.toString.call( arguments[0] ) === '[object Boolean]' ) {\n\t\t\tdeep = arguments[0];\n\t\t\ti++;\n\t\t}\n\n\t\t// Merge the object into the extended object\n\t\tvar merge = function (obj) {\n\t\t\tfor (var prop in obj) {\n\t\t\t\tif (obj.hasOwnProperty(prop)) {\n\t\t\t\t\t// If property is an object, merge properties\n\t\t\t\t\tif (deep && Object.prototype.toString.call(obj[prop]) === '[object Object]') {\n\t\t\t\t\t\textended[prop] = extend(extended[prop], obj[prop]);\n\t\t\t\t\t} else {\n\t\t\t\t\t\textended[prop] = obj[prop];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\t// Loop through each object and conduct a merge\n\t\tfor (; i < arguments.length; i++) {\n\t\t\tvar obj = arguments[i];\n\t\t\tmerge(obj);\n\t\t}\n\n\t\treturn extended;\n\t};\n\n\n\n\t/**\n\t * Returns a function, that, as long as it continues to be invoked, will not\n\t * be triggered. The function will be called after it stops being called for\n\t * N milliseconds. If `immediate` is passed, trigger the function on the\n\t * leading edge, instead of the trailing.\n\t *\n\t * @param   {[type]}  func       Function to be executed.\n\t * @param   {[type]}  wait       Wait time in milliseconds.\n\t * @param   {[type]}  immediate  Trigger the function on the leading edge.\n\t *\n\t * @return  function              Function to be executed, incapsulated in a timed function.\n\t */\n\tvar _debounce = function ( func, wait, immediate ) {\n\t\tvar timeout;\n\n\t\treturn function() {\n\t\t  var context = this, args = arguments;\n\t\t  var later = function() {\n\t\t\ttimeout = null;\n\t\t\tif (!immediate) func.apply( context, args );\n\t\t  };\n\n\t\t  var callNow = immediate && !timeout;\n\t\t  clearTimeout( timeout );\n\t\t  timeout = setTimeout( later, wait );\n\n\t\t  if ( callNow ) func.apply( context, args );\n\t\t};\n\t};\n\n\n\n\t/**\n\t * Add spin buttons\n\t */\n\tvar addButtons = function( input, options ) {\n\t\t// Create temporary element to create buttons from string template\n\t\tvar tempDiv = document.createElement('div');\n\n\t\t// Define buttons placement\n\t\tvar buttonPlacement = options.buttonPlacement;\n\t\tvar minusReferenceElement;\n\t\tvar plusReferenceElement;\n\t\tswitch ( buttonPlacement ) {\n\t\t\tcase 'before':\n\t\t\t\tminusReferenceElement = input;\n\t\t\t\tplusReferenceElement = input;\n\t\t\t\tbreak;\n\t\t\tcase 'after':\n\t\t\t\tminusReferenceElement = input.nextSibling;\n\t\t\t\tplusReferenceElement = input.nextSibling;\n\t\t\t\tbreak;\n\t\t\tdefault: // `both` before and after the input field\n\t\t\t\tminusReferenceElement = input;\n\t\t\t\tplusReferenceElement = input.nextSibling;\n\t\t\t\tbreak;\n\t\t}\n\n\t\t// Create minus button from template and insert it before input\n\t\ttempDiv.innerHTML = options.minusButtonTemplate;\n\t\ttempDiv.firstChild.setAttribute( 'data-number-spinner-button', 'minus' );\n\t\tinput.parentNode.insertBefore( tempDiv.firstChild, minusReferenceElement );\n\n\t\t// Create plus button from template and insert it after input\n\t\ttempDiv.innerHTML = options.plusButtonTemplate;\n\t\ttempDiv.firstChild.setAttribute( 'data-number-spinner-button', 'plus' );\n\t\tinput.parentNode.insertBefore( tempDiv.firstChild, plusReferenceElement );\n\n\t\t// Add class to input element\n\t\tinput.classList.add( options.buttonsAddedClass );\n\n\t\t// Remove tempDiv element from the DOM\n\t\tif ( tempDiv.remove ) { tempDiv.remove(); }\n\t};\n\n\n\n\t/**\n\t * Handle button click\n\t */\n\tvar handleCapturedClick = function( e ) {\n\t\t// Get target button\n\t\tvar target = e.target.closest( '[data-number-spinner-button]' );\n\n\t\t// Bail if number spinner button not clicked\n\t\tif ( ! target ) { return; }\n\n\t\t// Get target input\n\t\tvar targetInput = target.parentNode.querySelector( _settings.inputSelector );\n\n\t\t// Bail if target number input field was not found\n\t\tif ( ! targetInput ) { return; }\n\n\t\t// Ger decimals from field attributes\n\t\tvar decimals = targetInput.getAttribute( 'data-number-spinner-decimals' );\n\t\tdecimals = decimals ? parseInt( decimals ) : 0;\n\n\t\t// Get number field step and invert signal if minus button\n\t\tvar step = targetInput.getAttribute( 'step' );\n\t\tstep = step ? parseFloat( step ) : 1;\n\t\tstep = target.getAttribute( 'data-number-spinner-button' ) == 'minus' ? -1 * step : step;\n\n\t\t// Get min and max values\n\t\tvar min = targetInput.getAttribute( 'min' );\n\t\tmin = min != '' ? parseFloat( min ) : null;\n\t\tmin = min == NaN ? null : min;\n\t\tvar max = targetInput.getAttribute( 'max' );\n\t\tmax = max != '' ? parseFloat( max ) : null;\n\t\tmax = max == NaN ? null : max;\n\n\t\t// Get new value from field\n\t\tvar value = parseFloat( targetInput.value );\n\t\tvalue = value + step;\n\n\t\t// Handle min and max values\n\t\tif ( min != null && value < min ) { value = min; }\n\t\tif ( max != null && value > max ) { value = max; }\n\n\t\t// Lose focus from button\n\t\te.target.blur();\n\n\t\t// Set new value\n\t\t// Needs to set decimal places to avoid issues with floating point numbers\n\t\t// https://stackoverflow.com/questions/588004/is-floating-point-math-broken\n\t\ttargetInput.value = value.toFixed( decimals );\n\t\ttargetInput.focus();\n\n\t\t// Dispatch change event.\n\t\tvar changeEvent = new CustomEvent( 'change', { detail: {}, bubbles: false } );\n\t\ttargetInput.dispatchEvent( changeEvent );\n\t};\n\n\n\n\t/**\n\t * Initialize all input elements inside the passed container.\n\t *\n\t * @param   HTMLElement  containerElement  The container element where to look for input number fields.\n\t */\n\t_publicMethods.initInputFields = function( containerElement, options ) {\n\t\t// Bail if containerElement is invalid\n\t\tif ( ! containerElement ) { return; }\n\n\t\t// Merge options with default settings\n\t\toptions = extend( _settings, options );\n\n\t\t// Get input elements\n\t\tvar inputElements = containerElement.querySelectorAll( options.inputSelector );\n\n\t\tfor ( var i = 0; i < inputElements.length; i++ ) {\n\t\t\t// Check if already initialized\n\t\t\tif ( ! inputElements[ i ].classList.contains( options.buttonsAddedClass ) ) {\n\t\t\t\t// Add buttons\n\t\t\t\taddButtons( inputElements[ i ], options );\n\t\t\t}\n\n\t\t\t// Add event handlers\n\t\t\tif ( options.onChangeCallback && typeof options.onChangeCallback === \"function\" ) {\n\t\t\t\t// Try remove event listener to prevent duplicate, then add.\n\t\t\t\tinputElements[ i ].removeEventListener( 'change', _debounce( options.onChangeCallback, 200 ) );\n\t\t\t\tinputElements[ i ].addEventListener( 'change', _debounce( options.onChangeCallback, 200 ) );\n\t\t\t}\n\t\t}\n\t};\n\n\n\n\t/**\n\t * Initialize component and set related handlers.\n\t */\n\t_publicMethods.init = function( options ) {\n\t\tif ( _hasInitialized ) return;\n\n\t\t// Merge settings\n\t\t_settings = extend( _settings, options );\n\n\t\t// Add capture click event listener\n\t\tdocument.addEventListener( 'click', handleCapturedClick, true );\n\n\t\t// Initialize fields inside the default container\n\t\tif ( _settings.containerSelector && _settings.containerSelector !== '' ) {\n\t\t\tvar containerElement = document.querySelector( _settings.containerSelector );\n\t\t\t_publicMethods.initInputFields( containerElement );\n\t\t}\n\n\t\t// Add init class\n\t\tdocument.body.classList.add( _settings.bodyClass );\n\n\t\t_hasInitialized = true;\n\t};\n\n\n\n\t//\n\t// Public APIs\n\t//\n\treturn _publicMethods;\n\n});\n"],"names":["root","factory","define","amd","exports","module","NumberSpinner","global","this","window","extend","extended","deep","i","Object","prototype","toString","call","arguments","length","prop","obj","hasOwnProperty","_debounce","func","wait","immediate","timeout","context","args","callNow","clearTimeout","setTimeout","apply","handleCapturedClick","e","targetInput","decimals","max","value","changeEvent","target","closest","parentNode","querySelector","_settings","inputSelector","getAttribute","parseInt","step","parseFloat","min","NaN","blur","toFixed","focus","CustomEvent","detail","bubbles","dispatchEvent","_hasInitialized","_publicMethods","bodyClass","containerSelector","buttonPlacement","buttonsAddedClass","minusButtonTemplate","plusButtonTemplate","onChangeCallback","initInputFields","containerElement","options","inputElements","querySelectorAll","classList","contains","plusReferenceElement","minusReferenceElement","tempDiv","addButtons","input","document","createElement","nextSibling","innerHTML","firstChild","setAttribute","insertBefore","add","remove","removeEventListener","addEventListener","init","body"],"mappings":"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"}